<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>bbm&vvn</div>
    <div>bbm</div>
    <div>vvn</div>
    <div> vvn </div>
    <div>ddg</div>
    <div>ddg</div>
    <div>vivian<span>vvn</span>123</div>
    <div class="bbm">bbm</div>
    <div bbm>bbm</div>
    <div bbm="">bbm</div>
    <div bbm="false">bbm</div>
    <div vvn="10">vvn10</div>
    <div vvn="20">vvn20</div>
    <div vvn="30">vvn30</div>
    <div ddg="false">ddg-false</div>
    <div class="bbm" id="bbm">bbm</div>
    <script src="../tools/VerifyXpath.js"></script>
    <script>
      const examples = [
        // 所有元素
        '//*',
        // 所有 div 元素
        '//div',
        // text, 等于
        "//div[text()='vvn']",
        // text, 去掉前后空格后等于
        "//div[normalize-space(text())='vvn']",
        // text, 不等于
        "//div[text() !='vvn']",
        // text, 包含
        "//div[contains(text(),'bbm')]",
        // text, 不包含 vvn 的 div 元素
        "//div[not(contains(text(),'vvn'))]",
        // text, 以 vivian 开头
        "//div[starts-with(text(),'vivian')]",
        // text, 以 123 结尾; 通过 '123' 推算 string-length(string(.)) - 2)
        "//div[substring(string(.), string-length(string(.)) - 2) = '123']",
        //-----------
        // 属性选择器, @class, @id...
        "//div[@class='bbm']",
        // 自定义属性
        '//div[@bbm]',
        // 自定义属性为真
        "//div[@bbm and not(@bbm!='')]",
        // 自定义属性为假
        '//div[@ddg = "false"]',
        // bbm 大于 10 小于等于 30, 影刀没有
        '//div[number(@vvn) > 10 and number(@vvn) <= 30]',
        // and 情况, 自定义表达式
        "//div[text()='bbm' and @class='bbm' and @id='bbm']",
        // or 情况, 自定义表达式, 不用考虑
        "//div[contains(text(),'vvn') or text()='ddg']"
      ];

      examples.forEach((xpath, index) => {
        console.log(`\n示例 ${index + 1}: ${xpath}`);
        const elements = VerifyXpath(xpath);
        console.log(`找到 ${elements.length} 个元素:`);
        console.log(elements);
        elements.forEach((el) => {
          // console.log(`  - ${el.outerHTML.substring(0, 100)}...`);
        });
        console.log('------');
      });
    </script>
  </body>
</html>
